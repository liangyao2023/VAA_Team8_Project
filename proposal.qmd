---
title: "Project Proposal"
author: "LIM Li Ying, YEN Yun-hsuan, LIANG YAO"
date: '10 Jun 2023'
date-modified: "`r Sys.Date()`"
execute: 
  warning: false
  echo: true
  eval: true
format: 
  html: 
    code-fold: true
    code-summary: "Show the code"
---

# The Data

The data sets were obtained from the [VAST Challenge 2023 website](https://vast-challenge.github.io/2023/MC2.html), and consists of a knowledge graph and 12 bundles.

The 12 bundles (namely carp, catfish, chub_mackerel, cod2, herring, lichen, mackerel, pollock, salmon, salmon_wgl, shark and tuna) are generated by FishEye International using an AI program, each consisting of link suggestions that can potentially be added to the main graph for additional information.

The knowledge graph and the 12 bundles each contain 2 data frames, namely "nodes" and "links".

## Node Attributes

| **Variable** | **Description**                                               |
|-------------------|-----------------------------------------------------|
| Id           | Unique ID assigned to each fishing company                    |
| Shpcountry   | Country the company most often associated with when shipping  |
| Rcvcountry   | Country the company most often associated with when receiving |
| Dataset      | Always "MC2"                                                  |

## Edge Attributes

| Variable         | Description                                                                    |
|-------------------|-----------------------------------------------------|
| arrivaldate      | Date the shipment arrived at port in YYYY-MM-DD format.                        |
| hscode           | Harmonized System code for the shipment.                                       |
| valueofgoods_omu | Customs-declared value of the total shipment, in Oceanus Monetary Units (OMU)  |
| Volumeteu        | The volume of the shipment in 'Twenty-foot equivalent units'.                  |
| weightkg         | The weight of the shipment in kilograms.                                       |
| dataset          | Always 'MC2'.                                                                  |
| type             | Always "shipment".                                                             |
| generated_by     | Name of the program that generated the edge. (Only found on 'bundle' records.) |

# Methodology

## 1. Data cleaning and wrangling

-   Ensuring that the variables are formatted in the correct data type.

-   Handling of missing values

-   Transformation of variables (e.g. creation of new variables)

-   Aggregation of edges

## 2. Exploratory Data Analysis

-   Check timeseries distribution of variables.

-   Check hscode with most weights.

-   Decide on filtering criteria.

## 3. Building of the Shiny app

-   Design website layout

-   Build Shiny according to our analysis

## 4. The following is a non-exhaustive list of R packages that will be used for this challenge:

-   `shiny`: for building interactive web applications

-   `shinythemes`: for customization of the Shiny app

-   `jsonlite`: for loading and reading of ".json" files

-   `tidyverse`: a collection of R packages used for data preparation and manipulation

-   `igraph`: for network analysis and visualization

-   `ggraph`: an extension of ggplot2 for the creation of network graphs.

-   `visNetwork`: for creating interactive network graphs

-   `plotly`: for generating interactive charts

# Approach

## Q1. Categorize the types of business relationship patterns

1.  Network Graph Building:

    An interactive network graph will be created using the *visNetwork* package. To identify potential major distributors/wholesalers and recipients, we will filter the nodes based on their high out-degree/in-degree edges. Additionally, we will explore networks between the top wholesalers and recipients using different hscodes to observe any variations in patterns among different product categories.

2.  Centrality of nodes & categorize business relationships:

    To determine the relationship between companies, metrics such as degree centrality or eigenvector centrality will be computed to measure centrality scores. The scores can be visualized by changing the appearance of the nodes.

3.  Temporal Pattern Mining:

    By observing shipping patterns over the same time period, we can then identify any abnormal relationships or patterns among these companies (e.g. companies who do not have any records for multiple years).

The following diagram is a proposed example of changing the appearance of the nodes based on centrality scores. The bigger the nodes, the higher the degree centrality score, while the darker the nodes, the higher the eigenvector centrality score.

![](images/Picture1.png)

## Q2. Evaluating predicted knowledge graph provided by Fisheye

To determine which of the 12 AI generated bundles can be used to complete the main knowledge graph, facet nodes graphs will be plotted for each bundle. Bundles that provide the most useful information will be selected.

The figure below shows an early prototype of our proposed approach. As seen from the figure, cod2, lichen, salmon, shark and tuna bundles contain relatively fewer nodes compared to the other bundles, thus these bundles will not really value-add to our main network graph. Therefore, only bundles excluding the aforementioned bundles (i.e. carp, catfish, chub_mackerel, herring, mackerel, pollock, and salmon_wgl bundles) will be added to our main network graph.

![](images/Screenshot%202023-06-03%20at%2014.39.20.png){width="583"}

## Q3. Finding new patterns/anomalies

The links of the selected bundles will be combined with the links of the original knowledge graph. A new interactive network graph will then be created using the *visNetwork* package, which will allow us to identify any new patterns or anomalies that may emerge when the new links are added. Steps similar to those used in Q1 will be used in the pattern/anomaly detection.

The following diagram shows an early prototype of what our updated interactive network graph will look like, in comparison to the original network graph.

|                                                    |                                       |
|--------------------|----------------------------------------------------|
| **Original network graph**                         | ![](images/Picture2.png)              |
| **Network graph with links from selected bundles** | ![](images/Picture3.png){width="775"} |

## Q4. Identifying suspicious companies by new patterns

We will use the new patterns/anomalies detected during the previous step to aid in the identification of companies that are potentially suspicious. We will mainly look for:

1.  After filtering the edges by hscode, we will check whether clusters of companies trading products of a certain hscode category exhibit any abnormal connection patterns, compared to the trading of products from other hscodes. These abnormal connection patterns may include dense interconnections within a small group of companies, or isolated groups.

2.  After combining the links from the main network with those from the selected bundles, some original missing values can be filled. We will then reevaluate the network graph again to determine if there are companies with high weight but incomplete records for certain years. After identifying the companies with abnormal temporal pattern, we will then utilize interactive visualizations to analyze their data based on specific years or companies. This will allow us to examine how the network connections among these companies change over the years.

# Project Time Schedule

| Period             | Task                  | Allocation |
|--------------------|-----------------------|------------|
| 29, May \~ 4, Jun  | Agreement on Proposal | Whole team |
| 5, Jun \~ 11, Jun  | Independent Analysis  | Whole team |
| 12, Jun \~ 18, Jun | Combine of Work       | Whole team |
| 19, Jun \~ 25, Jun | Shiny APP             | Whole team |
| 26, Jun \~ 2, Jul  | Poster                | Whole team |

# References

NOAA Fisheries. (n.d.). *Understanding illegal, unreported, and unregulated fishing*. NOAA. https://www.fisheries.noaa.gov/insight/understanding-illegal-unreported-and-unregulated-fishing
